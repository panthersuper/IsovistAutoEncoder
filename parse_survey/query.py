
# given a input vector and potentially age/arch-background/gender, output a score for spacious/interest/public

import json

def man_dis(v1,v2):
    count = 0
    for vv1,vv2 in zip(v1,v2):
        count += abs(float(vv1)-float(vv2))
    return count

def getValue(data,input,type):
    value = 0
    dis_total = 0

    for key in data:
        v = json.loads(key)
        dis = man_dis(v,input)

        if dis == 0:
            return data[key][type]

        else:
            dis_total += 1/dis
            value += data[key][type]/dis
    
    return value/dis_total


data = json.load(open('normalized_ratings.json'))

input = [5., -4.175329685211182, 9.41032600402832, 7.18626070022583, -0.07734328508377075, -12.68263053894043, 8.282357215881348, -3.2810418605804443, 12.646541595458984, -2.232963800430298, -4.605036735534668, -13.24785041809082, 2.0747907161712646, -11.078619003295898, 11.635502815246582, 7.175955295562744, -4.471224784851074, 25.09442710876465, 22.656639099121094, 23.80824089050293, -3.5634641647338867, -22.164575576782227, -7.409176826477051, 16.649206161499023, -24.608596801757812, 6.550205230712891, -11.010260581970215, 5.023451805114746, 26.820110321044922, -7.697842121124268, -6.900229454040527, 0.12359903752803802, -7.071789264678955, -23.981725692749023, -5.240698337554932, -9.9716796875, -17.983089447021484, -4.154158115386963, -13.515731811523438, -17.791250228881836, 9.574851989746094, -11.738450050354004, -10.04945182800293, -6.061268329620361, -3.9482975006103516, -24.655399322509766, 15.264009475708008, -2.507146120071411, 1.230414867401123, 28.702007293701172, -2.334380865097046, -2.8059465885162354, 1.479321002960205, 19.224546432495117, 1.0366252660751343, -2.1963205337524414, -11.062627792358398, -1.096073031425476, 9.05185604095459, -13.66998291015625, 1.2865856885910034, 13.859882354736328, 10.20183277130127, 1.8466253280639648, -17.927078247070312, -10.724145889282227, 18.086185455322266, -20.564300537109375, 13.889483451843262, 6.4083709716796875, 21.603153228759766, -1.4415228366851807, -5.349975109100342, -14.833379745483398, -3.256376028060913, -3.286175012588501, -2.968291759490967, -5.740342140197754, 5.777169227600098, 3.499133586883545, -5.72894287109375, 7.492561340332031, -7.324489593505859, -11.233951568603516, -3.621518611907959, -2.0811123847961426, -6.3188018798828125, -1.2520148754119873, -1.0625427961349487, 37.16624069213867, 17.954126358032227, -3.4615907669067383, 19.041872024536133, 6.8925909996032715, -8.525818824768066, 26.483978271484375, -2.9978747367858887, -2.114922285079956, 2.914445400238037, -7.0924787521362305]


print(getValue(data,input,"interest"))

